interval: "1m"       # 巡检间隔，可写成 "30s"、"1m"、"5m" 等
slow_latency: "5s"   # 慢请求阈值，超过则从绿降为黄

monitors:
  # --- 88code ---
  - provider: "88code"
    service: "cc"
    url: "https://api.88code.com/v1/chat/completions"
    method: "POST"
    api_key: "sk-xxxxxxxx"  # 可通过环境变量 MONITOR_88CODE_CC_API_KEY 覆盖
    headers:
      Authorization: "Bearer {{API_KEY}}"
      Content-Type: "application/json"
    body: |
      {
        "model": "claude-3-opus",
        "messages": [{"role": "user", "content": "hi"}],
        "max_tokens": 1
      }

  - provider: "88code"
    service: "cx"
    url: "https://api.88code.com/v1/chat/completions"
    method: "POST"
    api_key: "sk-xxxxxxxx"
    headers:
      Authorization: "Bearer {{API_KEY}}"
      Content-Type: "application/json"
    body: |
      {
        "model": "gpt-4",
        "messages": [{"role": "user", "content": "hi"}],
        "max_tokens": 1
      }
    # 可选：要求响应体包含该关键字才视为成功（语义校验）
    success_contains: "hi"

  # --- DuckCoding (演示不同的 Header 格式) ---
  - provider: "duckcoding"
    service: "cc"
    url: "https://api.duckcoding.com/v1/messages"
    method: "POST"
    api_key: "sk-duck-xxxx"
    headers:
      x-api-key: "{{API_KEY}}"
      anthropic-version: "2023-06-01"
      content-type: "application/json"
    body: |
      {
        "model": "claude-3-sonnet",
        "max_tokens": 1,
        "messages": [{"role": "user", "content": "hi"}]
      }

  # --- 引用 data/ 目录下 JSON 的示例 ---
  - provider: "demo"
    service: "codex"
    url: "https://88code.org/openai/v1/responses"
    method: "POST"
    api_key: "sk-demo"
    headers:
      Authorization: "Bearer {{API_KEY}}"
      Content-Type: "application/json"
    body: "!include data/cx_base.json"
